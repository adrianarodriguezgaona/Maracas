@{
    ViewData["Title"] = "Home Page";
}

    <article id="app" class="row">
        @*<header class="col-md-4"></header>
        <nav>
            <ul class="list-group">
                <li v-for="item in productTypes" v-on:click="fetchProducts(item.name)" style="cursor:pointer">
                    <span>{{item.nameForView}}</span>
                </li>
            </ul>
        </nav>

        <h3 v-on:click="fetchScores()">Haal scores op</h3>*@
        <div class="row m-t-sm">
            <div class="col-lg-12">
                <div class="panel blank-panel">
                    <div class="panel-heading">
                        <div class="panel-options">
                            <ul id="settings-tabs" class="nav nav-tabs">
                                <li v-for="item in productTypes" v-on:click="fetchProducts(item.name)"  role="tab"
                                                       data-toggle="tab" aria-expanded="false" href="#">
                                    <span>{{item.nameForView}}</span>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>  
        </div>

                        <div>
                            <ul>
                                <li v-for="product in products">

                                    <span v-on:click="">{{ product.name}}</span>
                                    <span>{{product.artistName}}</span>
                                </li>
                            </ul>
                        </div>

                        <div id="details">

                        </div>
    </article>
@section scripts {
    <script src="~/lib/vue/vue.js">
    </script>

<script>

    var apiurl ='https://localhost:44378/api/product';
        var app = new Vue({

            el: '#app',
            data: {
               
                products: null,
                productTypes: [{ "nameForView": "Alle Producten", "name": "product" },
                               { "nameForView": "Cds", "name": "Cd" },
                               { "nameForView": "Instrumenten", "name": "Instrument" },
                               { "nameForView": "Partituren", "name": "score" }]
            },

            created: function () {
                var self = this;
                self.fetchProducts("product");
            },

            methods: {  
                fetchProducts: function (type) {
                                           
                    self = this;
                    if (type == "product") {
                        fetch(`${apiurl}`)
                        .then(res => res.json())
                         .then(function (products) {
                          self.products = products;
                                })
                     .catch(error => console.log(error))
                    }
                    else 
                    fetch(`${apiurl}/detailByType/${type}`)                    
                    .then(res => res.json())
                    .then(function (products) {
                                    self.products = products;
                                })
                     .catch(error => console.log(error))
                      
                },
                    
            }
                                 
        });

    </script>
}
